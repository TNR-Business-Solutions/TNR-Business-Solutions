(function () { 'use strict'; try { document.addEventListener('DOMContentLoaded', function() { initNavigation(); initSmoothScrolling(); initMobileMenu(); }); function initNavigation() { const header = document.querySelector('.header'); if (!header) return; const dropdowns = header.querySelectorAll('.dropdown'); dropdowns.forEach(function(dropdown) { const toggle = dropdown.querySelector('.dropdown-toggle'); const menu = dropdown.querySelector('.dropdown-menu'); if (!toggle || !menu) return; toggle.setAttribute('aria-expanded', 'false'); menu.setAttribute('aria-hidden', 'true'); menu.style.display = 'none'; toggle.addEventListener('click', function(e) { e.preventDefault(); toggleDropdown(dropdown); }); document.addEventListener('click', function(e) { if (!dropdown.contains(e.target)) { closeDropdown(dropdown); } }); document.addEventListener('keydown', function(e) { if (e.key === 'Escape') { closeDropdown(dropdown); } }); }); } function toggleDropdown(dropdown) { const toggle = dropdown.querySelector('.dropdown-toggle'); const menu = dropdown.querySelector('.dropdown-menu'); const isOpen = menu.getAttribute('aria-hidden') === 'false'; if (isOpen) { closeDropdown(dropdown); } else { openDropdown(dropdown); } } function openDropdown(dropdown) { const toggle = dropdown.querySelector('.dropdown-toggle'); const menu = dropdown.querySelector('.dropdown-menu'); menu.style.display = 'block'; menu.setAttribute('aria-hidden', 'false'); toggle.setAttribute('aria-expanded', 'true'); const firstLink = menu.querySelector('a'); if (firstLink) { firstLink.focus(); } } function closeDropdown(dropdown) { const toggle = dropdown.querySelector('.dropdown-toggle'); const menu = dropdown.querySelector('.dropdown-menu'); menu.style.display = 'none'; menu.setAttribute('aria-hidden', 'true'); toggle.setAttribute('aria-expanded', 'false'); toggle.focus(); } function initSmoothScrolling() { const anchorLinks = document.querySelectorAll('a[href^="#"]'); anchorLinks.forEach(function(link) { link.addEventListener('click', function(e) { const targetId = this.getAttribute('href').substring(1); const targetElement = document.getElementById(targetId); if (targetElement) { e.preventDefault(); targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' }); } }); }); } function initMobileMenu() { const mobileMenuToggle = document.querySelector('.mobile-menu-toggle'); const mainNav = document.querySelector('.main-nav'); if (mobileMenuToggle && mainNav) { mobileMenuToggle.addEventListener('click', function() { const isOpen = mainNav.classList.contains('mobile-open'); if (isOpen) { mainNav.classList.remove('mobile-open'); this.setAttribute('aria-expanded', 'false'); } else { mainNav.classList.add('mobile-open'); this.setAttribute('aria-expanded', 'true'); } }); } } function initLazyLoading() { const images = document.querySelectorAll('img[data-src]'); if ('IntersectionObserver' in window) { const imageObserver = new IntersectionObserver(function(entries) { entries.forEach(function(entry) { if (entry.isIntersecting) { const img = entry.target; img.src = img.dataset.src; img.removeAttribute('data-src'); imageObserver.unobserve(img); } }); }); images.forEach(function(img) { imageObserver.observe(img); }); } else { images.forEach(function(img) { img.src = img.dataset.src; img.removeAttribute('data-src'); }); } } if (document.querySelectorAll('img[data-src]').length > 0) { initLazyLoading(); } } catch (error) { console.error('Navigation initialization error:', error); } })();