name: Deploy to Wix

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: npm install
      
    - name: Build website
      run: npm run build
      
    - name: Deploy to Wix
      run: npm run deploy:wix
      
    - name: Create deployment summary
      run: |
        echo "## ðŸš€ Wix Deployment Complete!" >> $GITHUB_STEP_SUMMARY
        echo "Your website has been automatically deployed to Wix!" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "### ðŸ“ Generated Files:" >> $GITHUB_STEP_SUMMARY
        echo "- Homepage content" >> $GITHUB_STEP_SUMMARY
        echo "- Service pages" >> $GITHUB_STEP_SUMMARY
        echo "- SEO structured data" >> $GITHUB_STEP_SUMMARY
        echo "- Site settings" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "### ðŸ”— Wix Editor:" >> $GITHUB_STEP_SUMMARY
        echo "https://editor.wix.com/html/editor/web/renderer/edit/02850de4-e269-47bb-8510-343adc4469ee?metaSiteId=4483f29d-f541-486b-ae48-64f09aaa56b3" >> $GITHUB_STEP_SUMMARY
